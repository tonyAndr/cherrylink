=== CherryLink ===
Tags: seo, links
Requires at least: 4.7
Tested up to: 5.5
Stable tag: 2.1.7
Requires PHP: 5.6.38
License: GPLv2 or later
License URI: https://www.gnu.org/licenses/gpl-2.0.html

CherryLink - плагин для ручной перелинковки статей в WordPress. Простая и качественная перелинковка стала проще и быстрее.

== Description ==

Плагин для упрощения ручной внутренней перелинковки прямо в редакторе статьи. Вставка ссылки в 1 клик, список релевантных статей, подсказки анкоров и статистика входящих/исходящих ссылок.

Некоторые фичи:
* Показывает ссылки релевантные тексту — гибкие настройки алгоритма, стоп-слова, фильтры (по категории, дате и многому другому);
* Вставка ссылки вокруг выделенного текста в 1 клик;
* Находит в тексте подходящие анкоры;
* Статистика ссылок, навигация по уже вставленным в тексте;
* Работает в режиме HTML и RichText в классическом редакторе и в новом Gutenberg;
* Автоматическая перелинковка с помощью блока «Похожих статей» (при этом ссылки, которые есть в тексте, не повторяются);
* Быстрый фильтр для поиска нужной ссылки по ключевому слову, наличию в тексте, категории;
* Работает при редактировании стандартных записей, страниц, произвольных типов записей;
* Экспорт перелинковки в файл CSV;
* При удалении плагина перелинковка не пропадет.

    **CherryLink работает с классическим редактором (TinyMCE) и Gutenberg. Различные интерактивные PageBuilder’ы не поддерживаются и не будут.**


Здесь оставлю важные ссылки:

1. Страница плагина [CherryLink](https://seocherry.ru/dev/cherrylink/ "Тут можно приобрести ключ")
2. Инструкция по установке [Установка](https://seocherry.ru/dev/install-cherrylink/ "Если возникнут сложности")
3. Подробный мануал по использованию [Руководство](https://seocherry.ru/dev/cherrylink-manual/ "Есть ответы на многие вопросы")
4. Справка о переносе лицензии [Перенос лицензии](https://seocherry.ru/perenos-licenzii-cherrylink-i-vozvrat-deneg/ "Политика переноса ключа и возврата средств")

Чат в телеграме [Техподдержка](https://t.me/seovishnya "Обсуждение работы плагинов") и мой контакт [Антон](https://t.me/anton_seocherry "Телега")

== Installation ==

Установка описана в статье по ссылке: https://seocherry.ru/dev/install-cherrylink/

Кратко:

1. Залейте файлы плагина в  `/wp-content/plugins/cherrylink` на вашем хостинге, или установить прямо из админки WP.
2. Активируйте на странице плагинов в админке WP
3. Перейдите в Настройки->CherryLink для изменения опций плагина
4. Чтобы активировать лицензионный ключ, зайдите в раздел "Разное"

== Frequently Asked Questions ==

= Есть ли поддержка Gutenberg? =

Да

= Не находит релевантные статьи, что делать? =

Проверьте настройки фильтрации плагина, затем сделайте реиндексацию (Индекс ссылок - Пересоздать индекс). Если не поможет - обратитесь к разработчику.

= Активация плагина после установки занимает много времени, почему? =

При первой активации плагин сканирует все записи на сайте и создает таблицу в БД, где хранятся все данные, необходимые для подбора релевантных ссылок.

== ChangeLog ==

= 2.1.9 (08/01/2021) = 
* В поиске проблем с перелинковкой добавлены: ссылки на несуществующие страницы, рекурсивные ссылки
* Фикс поиска "Часто используемых слов" при создании индекса
* Оптимизации запросов к БД
* Фикс статистики исходящих ссылок в классическом редакторе при приобразовании относительных путей в полные

= 2.1.8 (04/01/2021) =
* Изменение логики поиска общих слов при реиндексации (те, что предлагается добавить в черный список): теперь собираем слова целиком, а не только основу
* Изменения в верстке редактора стоп-слов (чтобы все влезало в экран), и еще по мелочи
* В реиндексации добавлены обработчики ошибок + доп. инфа для отладки (см. консоль браузера)
* Унифицирован text-domain
* Добавлен ru_RU перевод для библиотеки обновлений
* Правки в библиотеке стемминга, доп. фильтры кривых символов
* Исправлены частные случаи зависания реиндексации, мелкие баги + чистка кода от мусора

= 2.1.6 - 2.1.7 (15/12/2020) =
* Обновление библиотек Tabulator (вероятный фикс масштабирования таблиц и проблем с реиндексацией)
* Уменьшено количество обрабатываемых статей за раз при реиндексе с 50 до 20, чтобы избежать ошибок с max_allowed_packet
* Ограничение размерности таблиц на странице с поиском проблем перелинковки до 50 позиций (для сохранения отзывчивости страницы)

= 2.1.5 (14/12/2020) =
* Фикс статистики ссылок в редакторе

= 2.1.4 (14/12/2020) =
* В админке теперь будет появляться предупреждение, если не создан индекс ссылок с предложением его создать/пересоздать
* Доработки на странице с поиском проблемной перелинковки

= 2.1.3 (11/12/2020) =
* Исправлена опция вкл/откл повторной вставки ссылок в Гутенберге (множественная вставка ссылки на одну и ту же статью)
* Добавлена страница для поиска проблем с перелинковкой (ищите в настройках на вкладке Индекс ссылок, в верхнем блоке Статус индексирования ссылка "Поиск проблем")
* Исправление бага экспорта статистики в CSV
* Чистка мусора в коде

= 2.1.2 (01/12/2020) =
* Фикс подсказок для коротких анкоров

= 2.1.1 (23/11/2020) =
* В Gutenberg добавлена возможность перехода к ссылкам без анкора, или если анкор - пробел (в статистике так и помечены "Без анкора")

= 2.1.0 =
* Реализована возможность создать несколько блоков ссылок с разными параметрами (количество, отступ, релевантность)

= 2.0.16 =
* Ключ лицензии скрывается при успешной активации
* Для версии WP < 5.0 добавлена проверка, чтобы не загружать функционал плагина для нового редактора Gutenberg
* Небольшие правки текста и орфографии
* Добавлен аргумент к хуку get_the_time, конфликт с плагином WP Last Modified Info исправлен
* Если не получилось загрузить ссылки, то в панели перелинковки выводится соответствующая ошибка (можно увидеть подробности при WP_DEBUG = true)
* Добавил "Оставшееся количество активаций" для ключа; ищите в настройках плагина, внизу правого сайдбара (если активации исчерпаны, то ничего не покажет)

= 2.0.15 (24/08/2020) =
* Добавлен выбор размера изображений для тега {imagesrc} в настройки шаблонов ссылки

= 2.0.14 (26/07/2020) = 
* Фикс множественной вставки ссылок

= 2.0.13 (07/07/2020) = 
* Добавлена возможность отключить кэш блока ссылок
* Добавлено количество аргументов в функции сохранения индекса (хук save_post)
* Добавил метабокс для индивидуальных настроек CRB у страниц 
* Добавлен заголовок статьи в панель с подсказками в Gutenberg 

= 2.0.12 (05/06/2020) =
* Фикс стилей при выключении, убран вывод параметров сетки блока ссылок

= 2.0.11 (04/06/2020) =
* Фикс для колонки входящих ссылок
* Чистка кода

= 2.0.10 (02/06/2020) =
* Фикс бесконечной реиндексации

= 2.0.9 (02/06/2020) =
* Чистка кода индексации мусора и выпадания PHP Notice в логе

= 2.0.8 (27/05/2020) =
* Фикс фильтрации уже использованных ссылок в выводе Блока ссылок

= 2.0.6-2.0.7 (27/05/2020) =
* Добавлена опция для отладки в блок ссылок

= 2.0.5 (16/05/2020) =
* Исправления ошибок

= 2.0.4 (12/05/2020) =
* Оптимизация пересоздания индекса, что будет сильно заметно на больших сайтах (3000 записей - до 30% быстрее / 30000 записей - до 60% быстрее)
* Оптимизация поиска релевантных ссылок (до 30% быстрее)
* На вкладке индекса отображается статус последней индексации (на случай, если не была завершена корректно)
* Багфиксы

= 2.0.3 (27/04/2020) =
* Исправления совместимости с FireFox (поиск подсказок)
* Исправления вставки ссылки в Gutenberg

= 2.0.2 (26/04/2020) =
* Поправил стили блока ссылок

= 2.0.1 (26/04/2020) =
* В сайдбар в настройках плагина добавлена ссылка на справку о переносе лицензии [Перенос лицензии](https://seocherry.ru/perenos-licenzii-cherrylink-i-vozvrat-deneg/ "Политика переноса ключа и возврата средств")
* Обзор изменений в версии 2.0 доступен тут [Обзор обновления 2.0](https://seocherry.ru/dev/cherrylink-2-0-perelinkovka-gutenberg/ "Привет, Гутенберг!")
* Мелкие правки

= 2.0.0 (25/04/2020) =
* Добавлена поддержка Gutenberg (отдельная реализация написанная с нуля на react)
* Плагин CRB интегрирован в основной, старый плагин CherryLink Related block можно безболезненно удалить, он больше не поддерживается
* Теперь блок ссылок позволяет менять анкоры, задать произвольный текст вместо стандартных title/h1
* Добавлены колонки с количеством входящих/исходящих ссылок в списке записей (как у йоаста)
* Поправлен импорт настроек (после импорта могли перестать отображаться ссылки в панели перелинковки)
* Исправлено много ошибок (...и наверняка появились новые:))

= 1.6.20 = 
* DEV ONLY
* Множество изменений для панели в гутенберге
* Версия до слияния с гутенбергом и CRB

= 1.6.19 (22/11/2019) =
* Частичный рефакторинг кода
* Индекс ссылок не создается атоматически при установке плагина, если на сайте больше 200 статей, плагин активируется сразу
* Реиндексация объединена с созданием схемы перелинковки
* Реиндексация оптимизирована, показывается текущий прогресс
* UI настроек плагина слегка переделан, опции из вкладки с экспортом статистики переехали в Индекс ссылок
* Экпорт статистики теперь можно делать как для исходящих, так и для входящих ссылок 

= 1.6.18 (17/11/2019) =
* Оптимизация запросов к БД в редакторе статьи
* Поправлено удаление меток
* Убрана заглушка в Gutenberg редакторе - его поддержка будет реализована отдельным плагином
* Оптимизация кода для создания CSV файла со статистикой перелинковки (+ отображение прогресса)
* Багфиксы (тег {imagesrc}, стоп-слова, js ошибки, прочие мелочи)

= 1.6.17 (17/10/2019) =
* Дополнительные правки для последних двух апдейтов

= 1.6.16 (15/10/2019) =
* Фикс размеров миниатюр для аддона CRB

= 1.6.15 (15/10/2019) =
* Фикс длины анонса

= 1.6.14 (09/08/2019) =
* Фикс быстрого фильра категорий

= 1.6.13 (26/06/2019) =
* Из-за проблем с доступом к CDN unpkg.com некоторые скрипты теперь идут в комплекте с плагином, что положительно скажется на скорости загрузки страниц настроек плагина

= 1.6.12 (04/06/2019) =
* Откатил минимальную версию PHP до 5.6.38

= 1.6.11 (03/06/2019) =
* Исправлены подсказки

= 1.6.10 (03/06/2019) =
* Изменения в коде для аддона CRB

= 1.6.9 (03/06/2019) =
* Попытка исправить конфликты с другими версиями plugins updater

= 1.6.8 (31/05/2019) =
* Поддержка различных размеров превью картинок для {imagesrc} (CRB)

= 1.6.7 (31/05/2019) =
* Исправлен баг, из-за которого перестал работать аддон CRB
* Расширен список предлагаемых стоп-слов после реиндексации (~до 35)
* Добавлены подтверждающие промпты при нажатии кнопок "Удалить все стоп-слова"/"Вернуть стандартные"

= 1.6.6 (30/05/2019) =
* добавлены кнопки для быстрого добавления в стоп слова из подсказок (после добавления слов потребуется реиндексация)
* в качестве доноров подсказок можно использовать часто встречающиеся слова из текста статьи
* убрана опция "Использовать Тайтл вместо Н1", теперь оба поля учитываются алгоритмом по умолчанию
* справа от подсказок добавлен процент для обозначения позиции в документе
* исправлен баг с выбором последней категории в панели перелинковки
* исправлен фокус редактора при поиске подказок (окончательно)
* поддержка переменных в сниппетах Yoast'а (в панели перелинковки вместо %%title%% и пр. будет выведен нормальный текст)
* небольшая оптимизация кода, может положительно сказаться на скорости индексирования
* дополнительно: проверена совместимость с TinyMCE Advanced (проблем не обнаружено)
* мелкие фиксы

= 1.6.5 =
* переезд кода на гитхаб, обновления будут приходить оттуда, как следствие - появится ченжлог в превью обновления в админке

= 1.6.4 =
* фикс фокуса редактора, проблема с подсказками

= 1.6.3 =
* фикс кривых кодировок после стемминга, поэтому не работала вставка в бд
* фикс импорта настроек

= 1.6.2 =
* fix ajax request

= 1.6.1 =
* fix output_tags > title filter, добавлен аргумент post-id

= 1.6.0 =
* обновлен редактор стоп-слов, они теперь хранятся в отдельной таблице БД
* кроме черного списка стоп-слов, теперь есть белый список
* списки стоп-слов и минимальная длина слова теперь учитываются везде одинаково (тайтл, контент, подсказки)
* преобразование старого формата стоп-слов в новый (это автоматом, ничего делать не надо)
* после реиндексации выводятся самые часто-используемые слова, которые сразу можно закинуть в черный список
* стемминг слов (выделение основы) для улучшения релевантности
* поиск подсказок немного улучшен (должно быть меньше неадекватного мусора и больше релевантных слов/фраз)
* возможность отключить однословные подсказки анкоров
* у каждой ссылки в панели перелинковки добавлена статистика (входищих/исходящих ссылок на статью)
* обновлена всплывашка статистики ссылок по редактируемой статье (размеры, прокрутка, активные ссылки)
* обновлены некоторые иконки (img вместо unicode, для поддержки win7)
* curl больше не требуется для работы плагина (доп. проверка через wp_remote_post)
* в гутенберге выведена заглушка с панелью, но без основного функционала (пока не реализуемо...)
* добавлена поддержка аддона CherryLink Related Block

= 1.5.2 =
* фикс статистики (префиксы таблиц)
* подготовка к апдейту

= 1.5.1 =
* фикс при обращении к API (/wp/v2/posts/, 500)

= 1.5.0 =
* искать для превью featured img
* не считать ссылки с #
* поправить фильтр по категориям (учитывать подкатегории, многоуровневая верстка)
* вставлять выделенное слово в быстрый фильтр (опционально)
* улучшить стату исходящих ссылок в редакторе (всплавашка, по аналогии с входящими)
* список анкоров-подсказок представить в более удобном виде
* доп кнопка вставки ссылки вокруг выделения прямо с панели подсказок
* обновлен шаблон ссылок альтернативный (+кнопка восстановить шаблоны)
* возврат кнопки пересоздания csv при изменении галочек
* другие мелкие доработки и исправления

= 1.4.9 =
* изменения из 1.4.8а
* быстрый фильтр категории
* в экспорте добавлено поле данных "Рубрики" для источника
* немного прибрал настройки, вынес пояснения во всплывашки
* унифицировать панель перелинковки, избавиться от метабокса
* баг с редиректом при реиндексации, если не вставлен ключ
* импорт настроек: сохранение/загрузка файла

= 1.4.8a =
* добавленая опция вставки относительных ссылок (без протокола, без домена)

= 1.4.5 =
* fix pages without editor, term hierarchy bug

= 1.4.4 =
* fix custom taxonomy

= 1.4.3 =
* custom stopwords optimization

= 1.4.2 =
* fix stopwords lowercase

= 1.4.1 =
* fix uninstall
* fix optimizations

= 1.4.0 =
* Исправление ошибок
* Оптимизация реиндексации
* Исправление утечек памяти
* Динамическая загрузка релевантных ссылок
* Перенесены некоторые настройки в отдельный пункт "Релевантность"
* Добавлено отображение прогресса реиндексации (временно отключено)
* Отключена реиндексация по умолчанию при обновлении плагина
* Добавлена опция вставки ссылки с пустым анкором для простого шаблона
* Сделан возврат после подсказок в то же место списка ссылок
* Добавлена опция вывода всех статей, а не только релевантных
* Альтернативный шаблон для рубрик
* Добавлен экспорт ссылок в CSV (данные в таблице wp_linkate_scheme)
* Кол-во входящих ссылок на панели перелинковки
* Выведен инфо сайдбар в админке
* Немного увеличены шрифты на панели перелинковки

= 1.3.06 =
* Исправление ошибок

= 1.3.05 =
* Опциональная чистка подсказок от стоп-слов

= 1.3.04 =
* Кол-во ключевых слов в настройках

= 1.3.03 =
* Фильтр только против тайтла(односторонний)

= 1.3.02 =
* Фильтр тайтла стоп-словами

= 1.3.01 =
* Мелкие фиксы, выход обновления в паблик

= 1.3.0 =
* Добавлен поиск подсказок (анкоров)
* Исправлен баг шаблона вставки таксономий
* Для OSX добавлена комбинация CMD+Click (аналог CTRL+Click) для альтернативного шаблона

= 1.2.13 =
* Служебная версия

= 1.2.12 =
* Фикс при обновлении меню

= 1.2.11 =
* Фикс: не показывать ссылку на себя

= 1.2.10 =
* Произвольные типы записей доступны для перелинковки (см. раздел фильтрация)

= 1.2.01 =
* Фиксы

= 1.2.0 =
* Поддержжка рубрик, в том числе плагинов f-cattxt, описания от yoast и т.д.
* Алгоритм учитывает описания и тайтлы из рубрик для подбора статей

= 1.1.19 =
* Фикс кодировки в шаблоне ссылки
* Новые теги {imagesrc} {anons}

= 1.1.17 =
* Мелкие фиксы

= 1.1.16 =
* Быстрая вставка анкора-тайтла (заголовка) при нажатии CTRL+Click
* Мелкие фиксы

= 1.1.15 =
* Обновлена библиотека для автоматического обновления плагина

= 1.1.14 =
* Вернулась обратная совместимость с версиями WP < 4.9.6
* Фикс для поддержки PHP 5.3
* В алго релевантности теперь можно использовать сео тайтл

= 1.1.13 =
* Фикс фикса для обновления 4.9.6 (возврат к истокам, спасибо разработчикам WP/TinyMCE за волшебный апдейт)

= 1.1.12 =
* Фикс для обновления 4.9.6 (изменен способ загрузки скрипта, перенесен в плагины tinymce)

= 1.1.11 =
* Исправлен редактор в страницах
* Добавлена проверка наличия curl библиотеки
* Реиндексация ссылок при установке плагина исправлена

= 1.1.9 =
* Исправлено: переход к ссылки таксономии в тексте
* Обновлены наименования переменных и функций, минимизируем конфликты

= 1.1.8 =
* Небольшие исправления и оптимизации (задержка обращений к серверу, буква Ё в фильтре)

= 1.1.3 =
* Добавлена возможность вставки одной и той же ссылки несколько раз
* Добавлен экспорт настроек, и сброс на дефолтные значения
* Исправлена проблема с members, теперь ссылки считаются только из редактора с id=content (будет переделано с поддержкой f-seo и yoast позже)
* Добавлена возможность открыть настройки плагина для разных ролей пользователей (через плагин user role editor)

= 1.1.2 =
* Мелкие фиксы

= 1.1.1 =
* Добавлен выбор минимальной длины слов, которые не учитываются алгоритмом схожести
* Мелкие фиксы

= 1.1.0 =
* Добавлены категории, метки и произвольная таксономия для перелинковки.
* Добавлено поле "стоп-слова" в настройках алгоритма схожести.
* Расширен базовый список стоп-слов, которые не учитываются алгоритмом.
* Теперь можно скрыть\показать как вставленные ссылки, так и не вставленные (два отдельных чекбокса)
* Ссылки на документы, картинки и прочее медиа теперь не учитываются в подсчете (в нижней панеле количества ссылок)
* Изменена проверка лицензий - теперь нет необходимости явно сообщать мне свои домены :)
* Убрал из вариантов покупки безлимитную лицензию.
* Теперь максимальное количество активаций для 1 ключа равно 50. Кто купил безлимит, для вас будет доступно 70 активаций.


= 1.0.9 =
* Значительно улучшено быстродейстие и отклик на изменения, скорость фильтрации ссылок и т.д.
Мелкие фиксы

= 1.0.8 =
* Небольшие исправления

= 1.0.7 =
* Автообновление скриптов при обновлении плагина, чтобы не чистить кэш каждый раз

= 1.0.6 =
* Значительно улучшена производительность плагина (были проблемы на слабых машинах, если на сайте сотни статей), будут дополнительные улучшения в будущем
* Добавлен фильтр по "запланированным" записям (черновик с запланированным временем публикации)
* Исправлено: иногда ссылки не вставлялись, если отсутствовал какой-либо атрибут (автор, категория и тд.)

= 1.0.5 =
* Исправлен косяк на произвольных типах записей, теперь плагин не загружается, если на странице нет поля редактора
* Исправлены прыжки вверх при открытии/закрытии панели перелинковки
* Добавлена кнопка (крестик) для закрытия панели с ссылками
* Таблицы рубрик/авторов в настройках сделал по компактнее
* Панель ссылок теперь не лезет выше окна загрузки изображений (изменен z-index)

= 1.0.4 =
* Исправлен Warning str_repeat

= 1.0.0 (12/03/2018) =
* Первый релиз

== Upgrade Notice ==

= 2.1.0 =
Появилась возможность задать несколько блоков ссылок

= 2.0.0 = 
Добавлена поддержка Gutenberg

= 1.6.19 = 
Оптимизации завезли! 
Внимание! После установки плагин может деактивироваться автоматически (изменились имена файлов). Возможно придется повторно активировать.

= 1.6.6 =
Ура, вышла новая версия!